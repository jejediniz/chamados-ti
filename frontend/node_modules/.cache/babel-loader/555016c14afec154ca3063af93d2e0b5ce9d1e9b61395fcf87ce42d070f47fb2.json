{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  timeout: 10000\n});\nlet unauthorizedHandler = null;\nexport function setUnauthorizedHandler(handler) {\n  unauthorizedHandler = handler;\n}\nfunction getToken() {\n  return sessionStorage.getItem('token');\n}\nfunction normalizeError(error) {\n  var _error$response, _error$response2, _error$response2$data, _error$response2$data2, _error$response3, _error$response3$data;\n  const status = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n  const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.error) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2.message) || ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message || 'Erro inesperado';\n  const normalized = new Error(message);\n  normalized.status = status;\n  return normalized;\n}\napi.interceptors.request.use(config => {\n  const token = getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\napi.interceptors.response.use(response => response, error => {\n  var _error$response4;\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401 && typeof unauthorizedHandler === 'function') {\n    unauthorizedHandler();\n  }\n  return Promise.reject(normalizeError(error));\n});\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","unauthorizedHandler","setUnauthorizedHandler","handler","getToken","sessionStorage","getItem","normalizeError","error","_error$response","_error$response2","_error$response2$data","_error$response2$data2","_error$response3","_error$response3$data","status","response","message","data","normalized","Error","interceptors","request","use","config","token","headers","Authorization","_error$response4","Promise","reject"],"sources":["/home/diniz_jessica/development/chamados-ti/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios'\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  timeout: 10000\n})\n\nlet unauthorizedHandler = null\n\nexport function setUnauthorizedHandler(handler) {\n  unauthorizedHandler = handler\n}\n\nfunction getToken() {\n  return sessionStorage.getItem('token')\n}\n\nfunction normalizeError(error) {\n  const status = error.response?.status\n  const message =\n    error.response?.data?.error?.message ||\n    error.response?.data?.message ||\n    error.message ||\n    'Erro inesperado'\n\n  const normalized = new Error(message)\n  normalized.status = status\n  return normalized\n}\n\napi.interceptors.request.use((config) => {\n  const token = getToken()\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`\n  }\n\n  return config\n})\n\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401 && typeof unauthorizedHandler === 'function') {\n      unauthorizedHandler()\n    }\n\n    return Promise.reject(normalizeError(error))\n  }\n)\n\nexport default api\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EACjEC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,IAAIC,mBAAmB,GAAG,IAAI;AAE9B,OAAO,SAASC,sBAAsBA,CAACC,OAAO,EAAE;EAC9CF,mBAAmB,GAAGE,OAAO;AAC/B;AAEA,SAASC,QAAQA,CAAA,EAAG;EAClB,OAAOC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;AACxC;AAEA,SAASC,cAAcA,CAACC,KAAK,EAAE;EAAA,IAAAC,eAAA,EAAAC,gBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,gBAAA,EAAAC,qBAAA;EAC7B,MAAMC,MAAM,IAAAN,eAAA,GAAGD,KAAK,CAACQ,QAAQ,cAAAP,eAAA,uBAAdA,eAAA,CAAgBM,MAAM;EACrC,MAAME,OAAO,GACX,EAAAP,gBAAA,GAAAF,KAAK,CAACQ,QAAQ,cAAAN,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBQ,IAAI,cAAAP,qBAAA,wBAAAC,sBAAA,GAApBD,qBAAA,CAAsBH,KAAK,cAAAI,sBAAA,uBAA3BA,sBAAA,CAA6BK,OAAO,OAAAJ,gBAAA,GACpCL,KAAK,CAACQ,QAAQ,cAAAH,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBK,IAAI,cAAAJ,qBAAA,uBAApBA,qBAAA,CAAsBG,OAAO,KAC7BT,KAAK,CAACS,OAAO,IACb,iBAAiB;EAEnB,MAAME,UAAU,GAAG,IAAIC,KAAK,CAACH,OAAO,CAAC;EACrCE,UAAU,CAACJ,MAAM,GAAGA,MAAM;EAC1B,OAAOI,UAAU;AACnB;AAEAzB,GAAG,CAAC2B,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,MAAMC,KAAK,GAAGrB,QAAQ,CAAC,CAAC;EAExB,IAAIqB,KAAK,EAAE;IACTD,MAAM,CAACE,OAAO,CAACC,aAAa,GAAG,UAAUF,KAAK,EAAE;EAClD;EAEA,OAAOD,MAAM;AACf,CAAC,CAAC;AAEF9B,GAAG,CAAC2B,YAAY,CAACL,QAAQ,CAACO,GAAG,CAC1BP,QAAQ,IAAKA,QAAQ,EACrBR,KAAK,IAAK;EAAA,IAAAoB,gBAAA;EACT,IAAI,EAAAA,gBAAA,GAAApB,KAAK,CAACQ,QAAQ,cAAAY,gBAAA,uBAAdA,gBAAA,CAAgBb,MAAM,MAAK,GAAG,IAAI,OAAOd,mBAAmB,KAAK,UAAU,EAAE;IAC/EA,mBAAmB,CAAC,CAAC;EACvB;EAEA,OAAO4B,OAAO,CAACC,MAAM,CAACvB,cAAc,CAACC,KAAK,CAAC,CAAC;AAC9C,CACF,CAAC;AAED,eAAed,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}