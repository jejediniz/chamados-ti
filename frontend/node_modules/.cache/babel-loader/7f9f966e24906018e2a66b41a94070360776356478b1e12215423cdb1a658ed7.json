{"ast":null,"code":"import _objectSpread from\"/home/diniz_jessica/development/chamados-ti/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import{listarUsuarios,criarUsuario}from\"../services/usuariosApi\";import{Button,Input,Select}from\"../components/ui\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Usuarios(){const[usuarios,setUsuarios]=useState([]);const[carregando,setCarregando]=useState(false);const[erro,setErro]=useState(null);const[sucesso,setSucesso]=useState(null);const[form,setForm]=useState({nome:\"\",email:\"\",senha:\"\",tipo:\"comum\",admin:false,ativo:true});async function carregarUsuarios(){setCarregando(true);setErro(null);try{const data=await listarUsuarios();setUsuarios(data);}catch(error){setErro(error.message||\"Erro ao carregar usuários\");}finally{setCarregando(false);}}useEffect(()=>{carregarUsuarios();},[]);function handleChange(e){const{name,value,type,checked}=e.target;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type===\"checkbox\"?checked:value}));}async function handleSubmit(e){e.preventDefault();if(!form.nome||!form.email||!form.senha){setErro(\"Nome, email e senha são obrigatórios\");return;}setErro(null);setSucesso(null);try{await criarUsuario(form);setForm({nome:\"\",email:\"\",senha:\"\",tipo:\"comum\",admin:false,ativo:true});setSucesso(\"Usuário criado com sucesso\");carregarUsuarios();}catch(error){setErro(error.message||\"Erro ao criar usuário\");}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Usu\\xE1rios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Cadastro e controle de acesso\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chamados-layout\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form-card\",children:[erro&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:erro}),sucesso&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:sucesso}),/*#__PURE__*/_jsx(Input,{label:\"Nome\",name:\"nome\",placeholder:\"Nome completo\",value:form.nome,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(Input,{label:\"Email\",type:\"email\",name:\"email\",placeholder:\"email@exemplo.com\",value:form.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(Input,{label:\"Senha\",type:\"password\",name:\"senha\",placeholder:\"Senha inicial\",value:form.senha,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(Select,{label:\"Tipo\",name:\"tipo\",value:form.tipo,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"comum\",children:\"Comum\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ti\",children:\"TI\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"admin\",checked:form.admin,onChange:handleChange}),\"Administrador\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"ativo\",checked:form.ativo,onChange:handleChange}),\"Ativo\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Criar usu\\xE1rio\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-header\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Usu\\xE1rios cadastrados\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"chamados-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Admin\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ativo\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[carregando&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:\"Carregando...\"})}),!carregando&&usuarios.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:\"Nenhum usu\\xE1rio encontrado.\"})}),usuarios.map(u=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Nome\",children:u.nome}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Email\",children:u.email}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Tipo\",children:u.tipo}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Admin\",children:u.admin?\"Sim\":\"Não\"}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Ativo\",children:u.ativo?\"Sim\":\"Não\"})]},u.id))]})]})]})]})]});}","map":{"version":3,"names":["useEffect","useState","listarUsuarios","criarUsuario","Button","Input","Select","jsx","_jsx","jsxs","_jsxs","Usuarios","usuarios","setUsuarios","carregando","setCarregando","erro","setErro","sucesso","setSucesso","form","setForm","nome","email","senha","tipo","admin","ativo","carregarUsuarios","data","error","message","handleChange","e","name","value","type","checked","target","prev","_objectSpread","handleSubmit","preventDefault","children","className","onSubmit","label","placeholder","onChange","required","variant","colSpan","length","map","u","id"],"sources":["/home/diniz_jessica/development/chamados-ti/frontend/src/pages/Usuarios.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { listarUsuarios, criarUsuario } from \"../services/usuariosApi\";\nimport { Button, Input, Select } from \"../components/ui\";\n\nexport default function Usuarios() {\n  const [usuarios, setUsuarios] = useState([]);\n  const [carregando, setCarregando] = useState(false);\n  const [erro, setErro] = useState(null);\n  const [sucesso, setSucesso] = useState(null);\n  const [form, setForm] = useState({\n    nome: \"\",\n    email: \"\",\n    senha: \"\",\n    tipo: \"comum\",\n    admin: false,\n    ativo: true,\n  });\n\n  async function carregarUsuarios() {\n    setCarregando(true);\n    setErro(null);\n    try {\n      const data = await listarUsuarios();\n      setUsuarios(data);\n    } catch (error) {\n      setErro(error.message || \"Erro ao carregar usuários\");\n    } finally {\n      setCarregando(false);\n    }\n  }\n\n  useEffect(() => {\n    carregarUsuarios();\n  }, []);\n\n  function handleChange(e) {\n    const { name, value, type, checked } = e.target;\n    setForm((prev) => ({\n      ...prev,\n      [name]: type === \"checkbox\" ? checked : value,\n    }));\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!form.nome || !form.email || !form.senha) {\n      setErro(\"Nome, email e senha são obrigatórios\");\n      return;\n    }\n\n    setErro(null);\n    setSucesso(null);\n    try {\n      await criarUsuario(form);\n      setForm({\n        nome: \"\",\n        email: \"\",\n        senha: \"\",\n        tipo: \"comum\",\n        admin: false,\n        ativo: true,\n      });\n      setSucesso(\"Usuário criado com sucesso\");\n      carregarUsuarios();\n    } catch (error) {\n      setErro(error.message || \"Erro ao criar usuário\");\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"page-header\">\n        <h2>Usuários</h2>\n        <p className=\"page-subtitle\">Cadastro e controle de acesso</p>\n      </div>\n\n      <div className=\"chamados-layout\">\n        <form onSubmit={handleSubmit} className=\"form-card\">\n          {erro && <div className=\"alert alert-error\">{erro}</div>}\n          {sucesso && <div className=\"alert alert-success\">{sucesso}</div>}\n          <Input\n            label=\"Nome\"\n            name=\"nome\"\n            placeholder=\"Nome completo\"\n            value={form.nome}\n            onChange={handleChange}\n            required\n          />\n\n          <Input\n            label=\"Email\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"email@exemplo.com\"\n            value={form.email}\n            onChange={handleChange}\n            required\n          />\n\n          <Input\n            label=\"Senha\"\n            type=\"password\"\n            name=\"senha\"\n            placeholder=\"Senha inicial\"\n            value={form.senha}\n            onChange={handleChange}\n            required\n          />\n\n          <Select label=\"Tipo\" name=\"tipo\" value={form.tipo} onChange={handleChange}>\n            <option value=\"comum\">Comum</option>\n            <option value=\"ti\">TI</option>\n          </Select>\n\n          <label className=\"checkbox-field\">\n            <input\n              type=\"checkbox\"\n              name=\"admin\"\n              checked={form.admin}\n              onChange={handleChange}\n            />\n            Administrador\n          </label>\n\n          <label className=\"checkbox-field\">\n            <input\n              type=\"checkbox\"\n              name=\"ativo\"\n              checked={form.ativo}\n              onChange={handleChange}\n            />\n            Ativo\n          </label>\n\n          <div className=\"form-actions\">\n            <Button type=\"submit\" variant=\"primary\">\n              Criar usuário\n            </Button>\n          </div>\n        </form>\n\n        <div className=\"table-card\">\n          <div className=\"table-header\">\n            <strong>Usuários cadastrados</strong>\n          </div>\n          <table className=\"chamados-table\">\n            <thead>\n              <tr>\n                <th>Nome</th>\n                <th>Email</th>\n                <th>Tipo</th>\n                <th>Admin</th>\n                <th>Ativo</th>\n              </tr>\n            </thead>\n            <tbody>\n              {carregando && (\n                <tr>\n                  <td colSpan=\"5\">Carregando...</td>\n                </tr>\n              )}\n              {!carregando && usuarios.length === 0 && (\n                <tr>\n                  <td colSpan=\"5\">Nenhum usuário encontrado.</td>\n                </tr>\n              )}\n              {usuarios.map((u) => (\n                <tr key={u.id}>\n                  <td data-label=\"Nome\">{u.nome}</td>\n                  <td data-label=\"Email\">{u.email}</td>\n                  <td data-label=\"Tipo\">{u.tipo}</td>\n                  <td data-label=\"Admin\">{u.admin ? \"Sim\" : \"Não\"}</td>\n                  <td data-label=\"Ativo\">{u.ativo ? \"Sim\" : \"Não\"}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}