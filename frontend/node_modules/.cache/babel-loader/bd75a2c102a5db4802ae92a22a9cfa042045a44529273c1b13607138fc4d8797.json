{"ast":null,"code":"import{createContext,useContext,useEffect,useState}from\"react\";import{useAuth}from\"./authContext\";import{listarChamados,criarChamado,atualizarChamado,excluirChamado}from\"../services/chamadosApi\";import{jsx as _jsx}from\"react/jsx-runtime\";const ChamadosContext=/*#__PURE__*/createContext(null);export function ChamadosProvider(_ref){let{children}=_ref;const{usuario}=useAuth();const[chamados,setChamados]=useState([]);const[carregando,setCarregando]=useState(false);const[chamadoEmEdicao,setChamadoEmEdicao]=useState(null);const[erro,setErro]=useState(null);async function carregarChamados(){setCarregando(true);setErro(null);try{const{items}=await listarChamados({page:1,limit:200});setChamados(items);}catch(error){setErro(error.message||\"Erro ao carregar chamados\");}finally{setCarregando(false);}}useEffect(()=>{if(usuario){carregarChamados();}else{setChamados([]);}},[usuario]);async function criarChamadoContext(dados){setErro(null);await criarChamado(dados);carregarChamados();}async function atualizarChamadoContext(id,dados){setErro(null);await atualizarChamado(id,dados);carregarChamados();}async function excluirChamadoContext(id){setErro(null);await excluirChamado(id);carregarChamados();}return/*#__PURE__*/_jsx(ChamadosContext.Provider,{value:{chamados,carregando,erro,chamadoEmEdicao,setChamadoEmEdicao,criarChamado:criarChamadoContext,atualizarChamado:atualizarChamadoContext,excluirChamado:excluirChamadoContext,recarregar:carregarChamados},children:children});}export function useChamados(){const ctx=useContext(ChamadosContext);if(!ctx){throw new Error(\"useChamados deve ser usado dentro de ChamadosProvider\");}return ctx;}","map":{"version":3,"names":["createContext","useContext","useEffect","useState","useAuth","listarChamados","criarChamado","atualizarChamado","excluirChamado","jsx","_jsx","ChamadosContext","ChamadosProvider","_ref","children","usuario","chamados","setChamados","carregando","setCarregando","chamadoEmEdicao","setChamadoEmEdicao","erro","setErro","carregarChamados","items","page","limit","error","message","criarChamadoContext","dados","atualizarChamadoContext","id","excluirChamadoContext","Provider","value","recarregar","useChamados","ctx","Error"],"sources":["/home/diniz_jessica/development/chamados-ti/frontend/src/contextos/chamadosContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport { useAuth } from \"./authContext\";\nimport {\n  listarChamados,\n  criarChamado,\n  atualizarChamado,\n  excluirChamado,\n} from \"../services/chamadosApi\";\n\nconst ChamadosContext = createContext(null);\n\nexport function ChamadosProvider({ children }) {\n  const { usuario } = useAuth();\n  const [chamados, setChamados] = useState([]);\n  const [carregando, setCarregando] = useState(false);\n  const [chamadoEmEdicao, setChamadoEmEdicao] = useState(null);\n  const [erro, setErro] = useState(null);\n\n  async function carregarChamados() {\n    setCarregando(true);\n    setErro(null);\n    try {\n      const { items } = await listarChamados({ page: 1, limit: 200 });\n      setChamados(items);\n    } catch (error) {\n      setErro(error.message || \"Erro ao carregar chamados\");\n    } finally {\n      setCarregando(false);\n    }\n  }\n\n  useEffect(() => {\n    if (usuario) {\n      carregarChamados();\n    } else {\n      setChamados([]);\n    }\n  }, [usuario]);\n\n  async function criarChamadoContext(dados) {\n    setErro(null);\n    await criarChamado(dados);\n    carregarChamados();\n  }\n\n  async function atualizarChamadoContext(id, dados) {\n    setErro(null);\n    await atualizarChamado(id, dados);\n    carregarChamados();\n  }\n\n  async function excluirChamadoContext(id) {\n    setErro(null);\n    await excluirChamado(id);\n    carregarChamados();\n  }\n\n  return (\n    <ChamadosContext.Provider\n      value={{\n        chamados,\n        carregando,\n        erro,\n        chamadoEmEdicao,\n        setChamadoEmEdicao,\n        criarChamado: criarChamadoContext,\n        atualizarChamado: atualizarChamadoContext,\n        excluirChamado: excluirChamadoContext,\n        recarregar: carregarChamados,\n      }}\n    >\n      {children}\n    </ChamadosContext.Provider>\n  );\n}\n\nexport function useChamados() {\n  const ctx = useContext(ChamadosContext);\n  if (!ctx) {\n    throw new Error(\"useChamados deve ser usado dentro de ChamadosProvider\");\n  }\n  return ctx;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}