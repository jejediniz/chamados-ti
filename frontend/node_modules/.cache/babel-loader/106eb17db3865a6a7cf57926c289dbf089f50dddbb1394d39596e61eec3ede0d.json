{"ast":null,"code":"import axios from'axios';const api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://localhost:3001',timeout:10000});let unauthorizedHandler=null;export function setUnauthorizedHandler(handler){unauthorizedHandler=handler;}function getToken(){return sessionStorage.getItem('token');}function normalizeError(error){var _error$response,_error$response2,_error$response2$data,_error$response2$data2,_error$response3,_error$response3$data;const status=(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:(_error$response2$data2=_error$response2$data.error)===null||_error$response2$data2===void 0?void 0:_error$response2$data2.message)||((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message||'Erro inesperado';const normalized=new Error(message);normalized.status=status;return normalized;}api.interceptors.request.use(config=>{const token=getToken();if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});api.interceptors.response.use(response=>response,error=>{var _error$response4;if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401&&typeof unauthorizedHandler==='function'){unauthorizedHandler();}return Promise.reject(normalizeError(error));});export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","unauthorizedHandler","setUnauthorizedHandler","handler","getToken","sessionStorage","getItem","normalizeError","error","_error$response","_error$response2","_error$response2$data","_error$response2$data2","_error$response3","_error$response3$data","status","response","message","data","normalized","Error","interceptors","request","use","config","token","headers","Authorization","concat","_error$response4","Promise","reject"],"sources":["/home/diniz_jessica/development/chamados-ti/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios'\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3001',\n  timeout: 10000\n})\n\nlet unauthorizedHandler = null\n\nexport function setUnauthorizedHandler(handler) {\n  unauthorizedHandler = handler\n}\n\nfunction getToken() {\n  return sessionStorage.getItem('token')\n}\n\nfunction normalizeError(error) {\n  const status = error.response?.status\n  const message =\n    error.response?.data?.error?.message ||\n    error.response?.data?.message ||\n    error.message ||\n    'Erro inesperado'\n\n  const normalized = new Error(message)\n  normalized.status = status\n  return normalized\n}\n\napi.interceptors.request.use((config) => {\n  const token = getToken()\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`\n  }\n\n  return config\n})\n\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401 && typeof unauthorizedHandler === 'function') {\n      unauthorizedHandler()\n    }\n\n    return Promise.reject(normalizeError(error))\n  }\n)\n\nexport default api\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACvBC,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CACjEC,OAAO,CAAE,KACX,CAAC,CAAC,CAEF,GAAI,CAAAC,mBAAmB,CAAG,IAAI,CAE9B,MAAO,SAAS,CAAAC,sBAAsBA,CAACC,OAAO,CAAE,CAC9CF,mBAAmB,CAAGE,OAAO,CAC/B,CAEA,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,MAAO,CAAAC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CACxC,CAEA,QAAS,CAAAC,cAAcA,CAACC,KAAK,CAAE,KAAAC,eAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAC7B,KAAM,CAAAC,MAAM,EAAAN,eAAA,CAAGD,KAAK,CAACQ,QAAQ,UAAAP,eAAA,iBAAdA,eAAA,CAAgBM,MAAM,CACrC,KAAM,CAAAE,OAAO,CACX,EAAAP,gBAAA,CAAAF,KAAK,CAACQ,QAAQ,UAAAN,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBQ,IAAI,UAAAP,qBAAA,kBAAAC,sBAAA,CAApBD,qBAAA,CAAsBH,KAAK,UAAAI,sBAAA,iBAA3BA,sBAAA,CAA6BK,OAAO,KAAAJ,gBAAA,CACpCL,KAAK,CAACQ,QAAQ,UAAAH,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBK,IAAI,UAAAJ,qBAAA,iBAApBA,qBAAA,CAAsBG,OAAO,GAC7BT,KAAK,CAACS,OAAO,EACb,iBAAiB,CAEnB,KAAM,CAAAE,UAAU,CAAG,GAAI,CAAAC,KAAK,CAACH,OAAO,CAAC,CACrCE,UAAU,CAACJ,MAAM,CAAGA,MAAM,CAC1B,MAAO,CAAAI,UAAU,CACnB,CAEAzB,GAAG,CAAC2B,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,EAAK,CACvC,KAAM,CAAAC,KAAK,CAAGrB,QAAQ,CAAC,CAAC,CAExB,GAAIqB,KAAK,CAAE,CACTD,MAAM,CAACE,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAaH,KAAK,CAAE,CAClD,CAEA,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC,CAEF9B,GAAG,CAAC2B,YAAY,CAACL,QAAQ,CAACO,GAAG,CAC1BP,QAAQ,EAAKA,QAAQ,CACrBR,KAAK,EAAK,KAAAqB,gBAAA,CACT,GAAI,EAAAA,gBAAA,CAAArB,KAAK,CAACQ,QAAQ,UAAAa,gBAAA,iBAAdA,gBAAA,CAAgBd,MAAM,IAAK,GAAG,EAAI,MAAO,CAAAd,mBAAmB,GAAK,UAAU,CAAE,CAC/EA,mBAAmB,CAAC,CAAC,CACvB,CAEA,MAAO,CAAA6B,OAAO,CAACC,MAAM,CAACxB,cAAc,CAACC,KAAK,CAAC,CAAC,CAC9C,CACF,CAAC,CAED,cAAe,CAAAd,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}