{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../contextos/authContext\";import{Button,Input,Card}from\"../components/ui\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var _location$state,_location$state$from;const{login,estaAutenticado,carregando,erro}=useAuth();const navigate=useNavigate();const location=useLocation();const[email,setEmail]=useState(\"\");const[senha,setSenha]=useState(\"\");const[erroLocal,setErroLocal]=useState(null);const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";async function handleSubmit(e){e.preventDefault();if(!email||!senha){setErroLocal(\"Informe email e senha\");return;}setErroLocal(null);await login(email,senha);}useEffect(()=>{if(!carregando&&estaAutenticado){navigate(from,{replace:true});}},[estaAutenticado,carregando,navigate,from]);if(carregando&&!estaAutenticado){return/*#__PURE__*/_jsx(\"div\",{className:\"center-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Carregando...\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chamados TI\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bem-vindo novamente! Entre para acompanhar e resolver demandas.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-layout\",children:/*#__PURE__*/_jsxs(Card,{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Informe suas credenciais para acessar o ambiente de chamados.\"}),(erroLocal||erro)&&/*#__PURE__*/_jsx(\"div\",{role:\"status\",\"aria-live\":\"polite\",className:\"alert alert-error\",children:erroLocal||erro}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"auth-form\",children:[/*#__PURE__*/_jsx(Input,{label:\"Email\",type:\"email\",name:\"email\",placeholder:\"email@exemplo.com\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(Input,{label:\"Senha\",type:\"password\",name:\"senha\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:senha,onChange:e=>setSenha(e.target.value),required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-actions\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:carregando,children:carregando?\"Entrando...\":\"Entrar\"})})]})]})})]});}","map":{"version":3,"names":["useState","useEffect","useNavigate","useLocation","useAuth","Button","Input","Card","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_location$state","_location$state$from","login","estaAutenticado","carregando","erro","navigate","location","email","setEmail","senha","setSenha","erroLocal","setErroLocal","from","state","pathname","handleSubmit","e","preventDefault","replace","className","children","role","onSubmit","label","type","name","placeholder","value","onChange","target","required","disabled"],"sources":["/home/diniz_jessica/development/chamados-ti/frontend/src/pages/Login.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"../contextos/authContext\";\nimport { Button, Input, Card } from \"../components/ui\";\n\nexport default function Login() {\n  const { login, estaAutenticado, carregando, erro } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [email, setEmail] = useState(\"\");\n  const [senha, setSenha] = useState(\"\");\n  const [erroLocal, setErroLocal] = useState(null);\n\n  const from = location.state?.from?.pathname || \"/\";\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!email || !senha) {\n      setErroLocal(\"Informe email e senha\");\n      return;\n    }\n\n    setErroLocal(null);\n    await login(email, senha);\n  }\n\n  useEffect(() => {\n    if (!carregando && estaAutenticado) {\n      navigate(from, { replace: true });\n    }\n  }, [estaAutenticado, carregando, navigate, from]);\n\n  if (carregando && !estaAutenticado) {\n    return (\n      <div className=\"center-page\">\n        <div className=\"loading\">Carregando...</div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* CABEÇALHO DO LOGIN (SEM BOTÕES) */}\n      <header className=\"login-header\">\n        <h1>Chamados TI</h1>\n        <p>Bem-vindo novamente! Entre para acompanhar e resolver demandas.</p>\n      </header>\n\n      <div className=\"login-layout\">\n        <Card className=\"auth-card\">\n          <h2>Login</h2>\n          <p>Informe suas credenciais para acessar o ambiente de chamados.</p>\n\n          {(erroLocal || erro) && (\n            <div role=\"status\" aria-live=\"polite\" className=\"alert alert-error\">\n              {erroLocal || erro}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"auth-form\">\n            <Input\n              label=\"Email\"\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"email@exemplo.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n\n            <Input\n              label=\"Senha\"\n              type=\"password\"\n              name=\"senha\"\n              placeholder=\"••••••••\"\n              value={senha}\n              onChange={(e) => setSenha(e.target.value)}\n              required\n            />\n\n            <div className=\"auth-actions\">\n              <Button type=\"submit\" disabled={carregando}>\n                {carregando ? \"Entrando...\" : \"Entrar\"}\n              </Button>\n            </div>\n          </form>\n        </Card>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}