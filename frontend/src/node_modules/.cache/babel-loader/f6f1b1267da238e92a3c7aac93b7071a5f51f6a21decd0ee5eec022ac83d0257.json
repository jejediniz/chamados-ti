{"ast":null,"code":"const STORAGE_KEY = \"@chamados-ti:chamados\";\n\n/* STATUS */\nexport const STATUS_CHAMADO = {\n  ABERTO: \"ABERTO\",\n  EM_ATENDIMENTO: \"EM_ATENDIMENTO\",\n  AGUARDANDO_CLIENTE: \"AGUARDANDO_CLIENTE\",\n  AGUARDANDO_TERCEIRO: \"AGUARDANDO_TERCEIRO\",\n  RESOLVIDO: \"RESOLVIDO\",\n  FECHADO: \"FECHADO\"\n};\n\n/* PRIORIDADE */\nexport const PRIORIDADE = {\n  BAIXA: \"BAIXA\",\n  MEDIA: \"MEDIA\",\n  ALTA: \"ALTA\",\n  CRITICA: \"CRITICA\"\n};\n\n/* PRIORIDADE AUTOMÁTICA */\nfunction calcularPrioridade(categoria, impacto) {\n  if (impacto === \"ALTO\") return PRIORIDADE.CRITICA;\n  if (categoria === \"INFRA\") return PRIORIDADE.ALTA;\n  return PRIORIDADE.MEDIA;\n}\n\n/* SLA POR PRIORIDADE (HORAS) */\nfunction calcularSLA(prioridade) {\n  switch (prioridade) {\n    case PRIORIDADE.CRITICA:\n      return 4;\n    case PRIORIDADE.ALTA:\n      return 8;\n    case PRIORIDADE.MEDIA:\n      return 24;\n    default:\n      return 48;\n  }\n}\n\n/* LISTAGEM */\nexport async function listarChamados(empresaId) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  return chamados.filter(c => c.empresaId === empresaId);\n}\n\n/* CRIAÇÃO */\nexport async function salvarChamado(empresaId, chamado) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  const prioridade = calcularPrioridade(chamado.categoria, chamado.impacto);\n  const novoChamado = {\n    ...chamado,\n    id: Date.now(),\n    empresaId,\n    status: STATUS_CHAMADO.ABERTO,\n    prioridade,\n    slaHoras: calcularSLA(prioridade),\n    criadoEm: new Date().toISOString(),\n    fechadoEm: null,\n    historico: [{\n      data: new Date().toISOString(),\n      acao: \"Chamado criado\"\n    }],\n    comentarios: []\n  };\n  chamados.push(novoChamado);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return novoChamado;\n}\n\n/* ATUALIZAÇÃO + AUDITORIA */\nexport async function atualizarChamadoStorage(empresaId, id, dadosAtualizados) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  const index = chamados.findIndex(c => c.id === id && c.empresaId === empresaId);\n  if (index === -1) throw new Error(\"Chamado não encontrado\");\n  const chamadoAtual = chamados[index];\n  chamados[index] = {\n    ...chamadoAtual,\n    ...dadosAtualizados,\n    historico: [...chamadoAtual.historico, {\n      data: new Date().toISOString(),\n      acao: \"Chamado atualizado\"\n    }]\n  };\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return chamados[index];\n}","map":{"version":3,"names":["STORAGE_KEY","STATUS_CHAMADO","ABERTO","EM_ATENDIMENTO","AGUARDANDO_CLIENTE","AGUARDANDO_TERCEIRO","RESOLVIDO","FECHADO","PRIORIDADE","BAIXA","MEDIA","ALTA","CRITICA","calcularPrioridade","categoria","impacto","calcularSLA","prioridade","listarChamados","empresaId","dados","localStorage","getItem","chamados","JSON","parse","filter","c","salvarChamado","chamado","novoChamado","id","Date","now","status","slaHoras","criadoEm","toISOString","fechadoEm","historico","data","acao","comentarios","push","setItem","stringify","atualizarChamadoStorage","dadosAtualizados","index","findIndex","Error","chamadoAtual"],"sources":["/home/diniz_jessica/development/chamados-ti/src/services/chamadosService.js"],"sourcesContent":["const STORAGE_KEY = \"@chamados-ti:chamados\";\n\n/* STATUS */\nexport const STATUS_CHAMADO = {\n  ABERTO: \"ABERTO\",\n  EM_ATENDIMENTO: \"EM_ATENDIMENTO\",\n  AGUARDANDO_CLIENTE: \"AGUARDANDO_CLIENTE\",\n  AGUARDANDO_TERCEIRO: \"AGUARDANDO_TERCEIRO\",\n  RESOLVIDO: \"RESOLVIDO\",\n  FECHADO: \"FECHADO\",\n};\n\n/* PRIORIDADE */\nexport const PRIORIDADE = {\n  BAIXA: \"BAIXA\",\n  MEDIA: \"MEDIA\",\n  ALTA: \"ALTA\",\n  CRITICA: \"CRITICA\",\n};\n\n/* PRIORIDADE AUTOMÁTICA */\nfunction calcularPrioridade(categoria, impacto) {\n  if (impacto === \"ALTO\") return PRIORIDADE.CRITICA;\n  if (categoria === \"INFRA\") return PRIORIDADE.ALTA;\n  return PRIORIDADE.MEDIA;\n}\n\n/* SLA POR PRIORIDADE (HORAS) */\nfunction calcularSLA(prioridade) {\n  switch (prioridade) {\n    case PRIORIDADE.CRITICA:\n      return 4;\n    case PRIORIDADE.ALTA:\n      return 8;\n    case PRIORIDADE.MEDIA:\n      return 24;\n    default:\n      return 48;\n  }\n}\n\n/* LISTAGEM */\nexport async function listarChamados(empresaId) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  return chamados.filter(c => c.empresaId === empresaId);\n}\n\n/* CRIAÇÃO */\nexport async function salvarChamado(empresaId, chamado) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n\n  const prioridade = calcularPrioridade(\n    chamado.categoria,\n    chamado.impacto\n  );\n\n  const novoChamado = {\n    ...chamado,\n    id: Date.now(),\n    empresaId,\n    status: STATUS_CHAMADO.ABERTO,\n    prioridade,\n    slaHoras: calcularSLA(prioridade),\n    criadoEm: new Date().toISOString(),\n    fechadoEm: null,\n    historico: [\n      {\n        data: new Date().toISOString(),\n        acao: \"Chamado criado\",\n      },\n    ],\n    comentarios: [],\n  };\n\n  chamados.push(novoChamado);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return novoChamado;\n}\n\n/* ATUALIZAÇÃO + AUDITORIA */\nexport async function atualizarChamadoStorage(empresaId, id, dadosAtualizados) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n\n  const index = chamados.findIndex(\n    c => c.id === id && c.empresaId === empresaId\n  );\n\n  if (index === -1) throw new Error(\"Chamado não encontrado\");\n\n  const chamadoAtual = chamados[index];\n\n  chamados[index] = {\n    ...chamadoAtual,\n    ...dadosAtualizados,\n    historico: [\n      ...chamadoAtual.historico,\n      {\n        data: new Date().toISOString(),\n        acao: \"Chamado atualizado\",\n      },\n    ],\n  };\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return chamados[index];\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}