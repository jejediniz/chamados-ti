{"ast":null,"code":"const STORAGE_KEY = \"@chamados-ti:chamados\";\nexport const STATUS_CHAMADO = {\n  ABERTO: \"ABERTO\",\n  EM_ATENDIMENTO: \"EM_ATENDIMENTO\",\n  AGUARDANDO_CLIENTE: \"AGUARDANDO_CLIENTE\",\n  AGUARDANDO_TERCEIRO: \"AGUARDANDO_TERCEIRO\",\n  RESOLVIDO: \"RESOLVIDO\",\n  FECHADO: \"FECHADO\"\n};\nexport async function listarChamados(empresaId) {\n  if (!empresaId) throw new Error(\"Empresa não informada\");\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  return chamados.filter(c => c.empresaId === empresaId);\n}\nexport async function salvarChamado(empresaId, chamado) {\n  if (!empresaId) throw new Error(\"Empresa não informada\");\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  const novoChamado = {\n    ...chamado,\n    id: Date.now(),\n    empresaId,\n    status: STATUS_CHAMADO.ABERTO,\n    criadoEm: new Date().toISOString(),\n    fechadoEm: null\n  };\n  chamados.push(novoChamado);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return novoChamado;\n}\nexport async function atualizarChamadoStorage(empresaId, id, dadosAtualizados) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n  const index = chamados.findIndex(c => c.id === id && c.empresaId === empresaId);\n  if (index === -1) throw new Error(\"Chamado não encontrado\");\n  chamados[index] = {\n    ...chamados[index],\n    ...dadosAtualizados,\n    fechadoEm: dadosAtualizados.status === STATUS_CHAMADO.FECHADO ? new Date().toISOString() : chamados[index].fechadoEm\n  };\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return chamados[index];\n}","map":{"version":3,"names":["STORAGE_KEY","STATUS_CHAMADO","ABERTO","EM_ATENDIMENTO","AGUARDANDO_CLIENTE","AGUARDANDO_TERCEIRO","RESOLVIDO","FECHADO","listarChamados","empresaId","Error","dados","localStorage","getItem","chamados","JSON","parse","filter","c","salvarChamado","chamado","novoChamado","id","Date","now","status","criadoEm","toISOString","fechadoEm","push","setItem","stringify","atualizarChamadoStorage","dadosAtualizados","index","findIndex"],"sources":["/home/diniz_jessica/development/chamados-ti/src/services/chamadosService.js"],"sourcesContent":["const STORAGE_KEY = \"@chamados-ti:chamados\";\n\nexport const STATUS_CHAMADO = {\n  ABERTO: \"ABERTO\",\n  EM_ATENDIMENTO: \"EM_ATENDIMENTO\",\n  AGUARDANDO_CLIENTE: \"AGUARDANDO_CLIENTE\",\n  AGUARDANDO_TERCEIRO: \"AGUARDANDO_TERCEIRO\",\n  RESOLVIDO: \"RESOLVIDO\",\n  FECHADO: \"FECHADO\",\n};\n\nexport async function listarChamados(empresaId) {\n  if (!empresaId) throw new Error(\"Empresa não informada\");\n\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n\n  return chamados.filter(c => c.empresaId === empresaId);\n}\n\nexport async function salvarChamado(empresaId, chamado) {\n  if (!empresaId) throw new Error(\"Empresa não informada\");\n\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n\n  const novoChamado = {\n    ...chamado,\n    id: Date.now(),\n    empresaId,\n    status: STATUS_CHAMADO.ABERTO,\n    criadoEm: new Date().toISOString(),\n    fechadoEm: null,\n  };\n\n  chamados.push(novoChamado);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return novoChamado;\n}\n\nexport async function atualizarChamadoStorage(empresaId, id, dadosAtualizados) {\n  const dados = localStorage.getItem(STORAGE_KEY);\n  const chamados = dados ? JSON.parse(dados) : [];\n\n  const index = chamados.findIndex(\n    c => c.id === id && c.empresaId === empresaId\n  );\n\n  if (index === -1) throw new Error(\"Chamado não encontrado\");\n\n  chamados[index] = {\n    ...chamados[index],\n    ...dadosAtualizados,\n    fechadoEm:\n      dadosAtualizados.status === STATUS_CHAMADO.FECHADO\n        ? new Date().toISOString()\n        : chamados[index].fechadoEm,\n  };\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(chamados));\n  return chamados[index];\n}\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,uBAAuB;AAE3C,OAAO,MAAMC,cAAc,GAAG;EAC5BC,MAAM,EAAE,QAAQ;EAChBC,cAAc,EAAE,gBAAgB;EAChCC,kBAAkB,EAAE,oBAAoB;EACxCC,mBAAmB,EAAE,qBAAqB;EAC1CC,SAAS,EAAE,WAAW;EACtBC,OAAO,EAAE;AACX,CAAC;AAED,OAAO,eAAeC,cAAcA,CAACC,SAAS,EAAE;EAC9C,IAAI,CAACA,SAAS,EAAE,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;EAExD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACb,WAAW,CAAC;EAC/C,MAAMc,QAAQ,GAAGH,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC,GAAG,EAAE;EAE/C,OAAOG,QAAQ,CAACG,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACT,SAAS,KAAKA,SAAS,CAAC;AACxD;AAEA,OAAO,eAAeU,aAAaA,CAACV,SAAS,EAAEW,OAAO,EAAE;EACtD,IAAI,CAACX,SAAS,EAAE,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;EAExD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACb,WAAW,CAAC;EAC/C,MAAMc,QAAQ,GAAGH,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC,GAAG,EAAE;EAE/C,MAAMU,WAAW,GAAG;IAClB,GAAGD,OAAO;IACVE,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;IACdf,SAAS;IACTgB,MAAM,EAAExB,cAAc,CAACC,MAAM;IAC7BwB,QAAQ,EAAE,IAAIH,IAAI,CAAC,CAAC,CAACI,WAAW,CAAC,CAAC;IAClCC,SAAS,EAAE;EACb,CAAC;EAEDd,QAAQ,CAACe,IAAI,CAACR,WAAW,CAAC;EAC1BT,YAAY,CAACkB,OAAO,CAAC9B,WAAW,EAAEe,IAAI,CAACgB,SAAS,CAACjB,QAAQ,CAAC,CAAC;EAC3D,OAAOO,WAAW;AACpB;AAEA,OAAO,eAAeW,uBAAuBA,CAACvB,SAAS,EAAEa,EAAE,EAAEW,gBAAgB,EAAE;EAC7E,MAAMtB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACb,WAAW,CAAC;EAC/C,MAAMc,QAAQ,GAAGH,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC,GAAG,EAAE;EAE/C,MAAMuB,KAAK,GAAGpB,QAAQ,CAACqB,SAAS,CAC9BjB,CAAC,IAAIA,CAAC,CAACI,EAAE,KAAKA,EAAE,IAAIJ,CAAC,CAACT,SAAS,KAAKA,SACtC,CAAC;EAED,IAAIyB,KAAK,KAAK,CAAC,CAAC,EAAE,MAAM,IAAIxB,KAAK,CAAC,wBAAwB,CAAC;EAE3DI,QAAQ,CAACoB,KAAK,CAAC,GAAG;IAChB,GAAGpB,QAAQ,CAACoB,KAAK,CAAC;IAClB,GAAGD,gBAAgB;IACnBL,SAAS,EACPK,gBAAgB,CAACR,MAAM,KAAKxB,cAAc,CAACM,OAAO,GAC9C,IAAIgB,IAAI,CAAC,CAAC,CAACI,WAAW,CAAC,CAAC,GACxBb,QAAQ,CAACoB,KAAK,CAAC,CAACN;EACxB,CAAC;EAEDhB,YAAY,CAACkB,OAAO,CAAC9B,WAAW,EAAEe,IAAI,CAACgB,SAAS,CAACjB,QAAQ,CAAC,CAAC;EAC3D,OAAOA,QAAQ,CAACoB,KAAK,CAAC;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}