{"ast":null,"code":"var _jsxFileName = \"/home/diniz_jessica/development/chamados-ti/src/contextos/authContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { PERFIS } from \"../config/perfis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nconst STORAGE_KEY = \"@chamados-ti:auth\";\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  var _usuario$perfil;\n  const [usuario, setUsuario] = useState(null);\n  const [empresaAtiva, setEmpresaAtiva] = useState(null);\n  const [carregando, setCarregando] = useState(true);\n\n  /**\n   * Recupera sessão salva\n   */\n  useEffect(() => {\n    const dadosSalvos = localStorage.getItem(STORAGE_KEY);\n    if (dadosSalvos) {\n      try {\n        const {\n          usuario,\n          empresaAtiva\n        } = JSON.parse(dadosSalvos);\n        setUsuario(usuario);\n        setEmpresaAtiva(empresaAtiva);\n      } catch {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n    setCarregando(false);\n  }, []);\n\n  /**\n   * Persiste sessão\n   */\n  useEffect(() => {\n    if (usuario && empresaAtiva) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify({\n        usuario,\n        empresaAtiva\n      }));\n    } else {\n      localStorage.removeItem(STORAGE_KEY);\n    }\n  }, [usuario, empresaAtiva]);\n\n  /**\n   * Login\n   */\n  function login(email, senha) {\n    const empresaFake = {\n      id: 1,\n      nome: \"Empresa Demo\",\n      slug: \"empresa-demo\"\n    };\n    const perfil = email === \"admin@chamadosti.com\" ? PERFIS.ADMIN : email.includes(\"tecnico\") ? PERFIS.TECNICO : PERFIS.USUARIO;\n    const usuarioFake = {\n      id: 1,\n      nome: perfil === PERFIS.ADMIN ? \"Administrador do Sistema\" : \"Usuário Teste\",\n      email,\n      perfil,\n      empresa: empresaFake\n    };\n    setUsuario(usuarioFake);\n    setEmpresaAtiva(empresaFake);\n  }\n\n  /**\n   * Logout\n   */\n  function logout() {\n    setUsuario(null);\n    setEmpresaAtiva(null);\n  }\n  const estaAutenticado = Boolean(usuario);\n  const perfil = (_usuario$perfil = usuario === null || usuario === void 0 ? void 0 : usuario.perfil) !== null && _usuario$perfil !== void 0 ? _usuario$perfil : null;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      usuario,\n      perfil,\n      empresaAtiva,\n      estaAutenticado,\n      carregando,\n      login,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"JQHhVvMkhY2IiHjRT2e2XWygd+8=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const ctx = useContext(AuthContext);\n  if (!ctx) {\n    throw new Error(\"useAuth deve ser usado dentro de AuthProvider\");\n  }\n  return ctx;\n}\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","PERFIS","jsxDEV","_jsxDEV","AuthContext","STORAGE_KEY","AuthProvider","children","_s","_usuario$perfil","usuario","setUsuario","empresaAtiva","setEmpresaAtiva","carregando","setCarregando","dadosSalvos","localStorage","getItem","JSON","parse","removeItem","setItem","stringify","login","email","senha","empresaFake","id","nome","slug","perfil","ADMIN","includes","TECNICO","USUARIO","usuarioFake","empresa","logout","estaAutenticado","Boolean","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","Error","$RefreshReg$"],"sources":["/home/diniz_jessica/development/chamados-ti/src/contextos/authContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport { PERFIS } from \"../config/perfis\";\n\nconst AuthContext = createContext(null);\n\nconst STORAGE_KEY = \"@chamados-ti:auth\";\n\nexport function AuthProvider({ children }) {\n  const [usuario, setUsuario] = useState(null);\n  const [empresaAtiva, setEmpresaAtiva] = useState(null);\n  const [carregando, setCarregando] = useState(true);\n\n  /**\n   * Recupera sessão salva\n   */\n  useEffect(() => {\n    const dadosSalvos = localStorage.getItem(STORAGE_KEY);\n\n    if (dadosSalvos) {\n      try {\n        const { usuario, empresaAtiva } = JSON.parse(dadosSalvos);\n        setUsuario(usuario);\n        setEmpresaAtiva(empresaAtiva);\n      } catch {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n\n    setCarregando(false);\n  }, []);\n\n  /**\n   * Persiste sessão\n   */\n  useEffect(() => {\n    if (usuario && empresaAtiva) {\n      localStorage.setItem(\n        STORAGE_KEY,\n        JSON.stringify({ usuario, empresaAtiva })\n      );\n    } else {\n      localStorage.removeItem(STORAGE_KEY);\n    }\n  }, [usuario, empresaAtiva]);\n\n  /**\n   * Login\n   */\n  function login(email, senha) {\n    const empresaFake = {\n      id: 1,\n      nome: \"Empresa Demo\",\n      slug: \"empresa-demo\",\n    };\n\n    const perfil =\n      email === \"admin@chamadosti.com\"\n        ? PERFIS.ADMIN\n        : email.includes(\"tecnico\")\n        ? PERFIS.TECNICO\n        : PERFIS.USUARIO;\n\n    const usuarioFake = {\n      id: 1,\n      nome:\n        perfil === PERFIS.ADMIN\n          ? \"Administrador do Sistema\"\n          : \"Usuário Teste\",\n      email,\n      perfil,\n      empresa: empresaFake,\n    };\n\n    setUsuario(usuarioFake);\n    setEmpresaAtiva(empresaFake);\n  }\n\n  /**\n   * Logout\n   */\n  function logout() {\n    setUsuario(null);\n    setEmpresaAtiva(null);\n  }\n\n  const estaAutenticado = Boolean(usuario);\n  const perfil = usuario?.perfil ?? null;\n\n  return (\n    <AuthContext.Provider\n      value={{\n        usuario,\n        perfil,\n        empresaAtiva,\n        estaAutenticado,\n        carregando,\n        login,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) {\n    throw new Error(\"useAuth deve ser usado dentro de AuthProvider\");\n  }\n  return ctx;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}